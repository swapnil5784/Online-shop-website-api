{ 
    "id": 1,

    "title": "Fjallraven - Foldsack No. 1 Backpack, Fits 15 Laptops",

    "price": 109.95,

    "description": "Your perfect pack for everyday use and walks in the forest. Stash your laptop (up to 15 inches) in the padded sleeve, your everyday",

    "category": "men's clothing",

    "image": "https://fakestoreapi.com/img/81fPKd-2AYL._AC_SL1500_.jpg",

    "rating": {
            "rate": 3.9,
            "count": 120 
            } 
}
----------------------------------------------------------------


[,,,]

insertMany([{"title":"electronics"},{"title":"jewelery"},{"title":"men's clothing"},{"title":"women's clothing"}])




------------------------------------------------------------------

category Object

{
    "title":category Name,
    "totalProducts":100,
    "image":"http://192.168.1.178:1108/images/category/cat-1.jpg"
}


-----------------------------------------------

Filter Object Be like below in POST request for product listing:

{
    // ---------------filter-----------
    filterByprice:[{
        min:0,
        max:100
    },
    {
        min:100,
        max:200
    }],
    filterByColor:["Black","Red" ...],
    FilterBySize:["S","M","XXL" ...],
    isFeatured:true,
    isMarkedFavorite:true
    // ----------------sort-------------
    sortBy:{
        field:"Rating",
        order:"asc/desc"
    },
    // ------------- skip,limit---------
     "pagination":{
        "page":2,
        "productsPerPage":5
     }
}


-------------------filter condition all applied


// [
//   {
//     $match: {
//       $or: [
//         {
//           $and: [
//             {
//               price: {
//                 $gte: 0,
//               },
//             },
//             {
//               price: {
//                 $lte: 100,
//               },
//             },
//           ],
//           $or: [
//             {
//               color: "Black",
//               $or: [
//                 {
//                   size: "XL",
//                 },
//                 {
//                   size: "M",
//                 },
//               ],
//             },
//             {
//               color: "Red",
//               $or: [
//                 {
//                   size: "XL",
//                 },
//                 {
//                   size: "M",
//                 },
//               ],
//             },
//           ],
//         },
//         {
//           $and: [
//             {
//               price: {
//                 $gte: 100,
//               },
//             },
//             {
//               price: {
//                 $lte: 200,
//               },
//             },
//           ],
//           $or: [
//             {
//               color: "Black",
//               $or: [
//                 {
//                   size: "XL",
//                 },
//                 {
//                   size: "M",
//                 },
//               ],
//             },
//             {
//               color: "Red",
//               $or: [
//                 {
//                   size: "XL",
//                 },
//                 {
//                   size: "M",
//                 },
//               ],
//             },
//           ],
//         },
//       ],
//     },
//   },
//   {
//     $project: {
//       _id: 1,
//       id: 1,
//       title: 1,
//       price: 1,
//       description: 1,
//       category: 1,
//       image: 1,
//       rating: 1,
//       isfeatured: 1,
//       isMarkedFavorite: 1,
//       color: 1,
//       size: 1,
//     },
//   },
// ];
        













        full order details aggregation query




        db.getCollection('orderdetails').aggregate([
{
 $match:{
     userId:ObjectId("6479dbee8cd9bd12368084ab")
     }   
    }
,
{
    $unwind:{
        path:"$products"
        }
    },
    {
        $lookup:{
            from:"products",
            let:{ "pid" : "$products.productId" },
            pipeline:[ 
            {
                $match:{
                    $expr:{
                        $eq:[ "$_id" ,"$$pid" ]
                        }
                    }
                },
                {
                    $project:{
                        title:1,
                        price:1,
                        description:1,
                        category:1,
                        rating:1,
                        color:1,
                        size:1,
                        _id:0
                        }
                    }
            ],
            as:"productDetails"
            }
        },
        {
            $lookup:{
            from:"orders",
            let:{ "oid" : "$orderId" },
            pipeline:[ 
            {
                $match:{
                    $expr:{
                        $eq:[ "$_id" ,"$$oid" ]
                        }
                    }
                },{
                    $project:{
                        billingId:1,
                        deliveryId:1,
                        totalAmount:1,
                        shippingAmount:1,
                        paymentMethod:1,
                        createdOn:1,
                        _id:0
                        }
                    }
                
            ],
            as:"orderDetails"
            } 
            },
             {
            $project:{
                productQuantity:"$products.quantity",
                productDetails:{ $arrayElemAt:[ "$productDetails",0 ] },
                orderAmount:1,
                orderDetails:{ $arrayElemAt:[ "$orderDetails",0 ] },
                }
            },
            {
                $lookup:{
            from:"addressbooks",
            let:{ "aid" : "$orderDetails.billingId" },
            pipeline:[ 
            {
                $match:{
                    $expr:{
                        $eq:[ "$_id" ,"$$aid" ]
                        }
                    }
                },{
                    
                    $project:{
                        title:1,
                        country:1,
                        name:1,
                        mobileNo:1,
                        pincode:1,
                        addressLineOne:1,
                        addressLineTwo:1,
                        landmark:1,
                        city:1,
                        state:1
                        }
                    }
                
            ],
            as:"billingAddress"
            }
                },
                {
                $lookup:{
            from:"addressbooks",
            let:{ "aid" : "$orderDetails.deliveryId" },
            pipeline:[ 
            {
                $match:{
                    $expr:{
                        $eq:[ "$_id" ,"$$aid" ]
                        }
                    }
                },
                {
                    
                    $project:{
                        title:1,
                        country:1,
                        name:1,
                        mobileNo:1,
                        pincode:1,
                        addressLineOne:1,
                        addressLineTwo:1,
                        landmark:1,
                        city:1,
                        state:1
                        }
                    }
                
            ],
            as:"deliveryAddress"
            }
                },
                {
                    $project:{
                        orderAmount:1,
                        productQuantity:1,
                        productDetails:1,
                        orderDetails:1,
                        billingAddress:{ $arrayElemAt:[ "$billingAddress",0 ] },
                        deliveryAddress:{ $arrayElemAt:[ "$deliveryAddress",0 ] }
                        
                        }
                    }
       

])